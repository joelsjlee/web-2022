I"B2<p><a href="https://newspapers.ushmm.org/">History Unfolded</a> is a citizen history project of the United States Holocaust Memorial Museum in Washington, DC. It relies on the power of crowdsourcing to create a unique dataset of newspaper articles so that we can better understand what news Americans had access to throughout the Holocaust.</p>

<p>While the project currently allows for users to look through events and their articles in list form, the metadata that users input when uploading an article can be transformed into geographic data. This blog post aims to show the process of taking citizen history metadata and turning it into a useful interactive map, but also serves as an example of how metadata in collections broadly can be used in unique ways to create new visualizations.</p>

<p>This is a series that is based on my work throughout 2022-2023 in working with exploratory methods and tools on citizen history data. In this article we will be using Python, Jupyter Notebooks, Javascript, CSS, HTML, and the mapping library Leaflet.</p>

<h2 id="the-data">The Data</h2>

<p>The general structure of the data in History Unfolded is first filtered through events. These are specific important historical events chosen so that users can read about or find and upload articles relevant to those events. In any particular event, we can look through the articles and sort them by a variety of different metadata fields.</p>

<p>Users need to input metadata when making an article submission to History Unfolded, such as the headline, the newspaper name, the page number it was found on, and so on. However, the relevant data for us to use for plotting the articles is the ‘City’ and ‘State’ in which the newspaper is located. From there, we can use that metadata to convert the city and state name into something a mapping library can understand and plot, namely latitude and longitude coordinates.</p>

<h2 id="geocoding">Geocoding</h2>

<p>Geocoding is the process by which we go from any particular textual address to geographical coordinates. Rather than looking up each city and state name on a web search to find their coordinates, we can programmatically call upon existing geocoding services: we give the service the city and state values and receive the coordinates. Google Maps API is one service that we can use to retrieve these coordinates. There are other services such as the ESRI/ArcGIS geocoding service, or even the US Census has a geocoding service, however for this project we use the Google Maps API.</p>

<p>Because the backend data is given to us as a csv, we can use Python and Jupyter Notebooks to easily wrangle with the data. Below is an example of how one could make a request to the Google Maps API with the city and state name Groton, CT:</p>

<p>As you can see, we input the city “Groton” and the state “CT” into the url of the request and we receive the latitude and longitude of the result. Doing this process for all of the entries in a particular event of article submissions gives us two additional columns of metadata to go along with every entry: the latitude and the longitude of the location that it was published in.</p>

<h2 id="mapping-libraries">Mapping Libraries</h2>

<p>Now that we have the geographic coordinates of each of the entries, we can get started on mapping the articles. There exists many different mapping softwares of varying levels of user friendliness, technical capacity/complexity, and flexibility, but the library we will use in this project is Leaflet. While not trying to get too bogged down into the comparisons, Leaflet seems to balance not being too complex for a beginner programmer (as it does not fully delve into the world of GIS) while still being flexible and robust in its technical capacity as a Javascript library.</p>

<p>(If you are looking for something much less complex and more user friendly, I would recommend Felt. If you are looking for something more technically capable, I would recommend ArcGIS.)</p>

<p>Leaflet is a mapping library built in Javascript that allows for the light and easy interactive mapping of data. While there are many other libraries that are wrappers of Leaflet that provide more structure (React Leaflet) and the use of Leaflet in other languages (Folium), in this project we will use vanilla Leaflet and JS, HTML, CSS for our interactive map, as it allows us to easily use certain native Leaflet widgets with ease. This blog post isn’t meant to delve into all the technical details of setting up and implementing a Leaflet map, rather it will give broad strokes of how different features were implemented in the map.</p>

<h2 id="application">Application</h2>

<p>The working version for the interactive map can be found here. The map’s data points are categorized, like the website, by events that you can switch from by the top dropdown bar. All points for each event are displayed and you can click on any numbered cluster to reveal their points, and then any marker point to open the sidebar and get all the relevant metadata for a particular point. There are a couple widgets that were added to the map to make it more interactive.</p>

<ol>
  <li>Sidebar (from sidebar-v2)
 Adding a sidebar allows for users to view the metadata when clicking on different markers on the map.</li>
  <li>Choropleth layers (from Leaflet docs and U.S. Census Data)
  Adding interactive choropleth layers allows for both the implementation of population data, as well as the ability to click on any state and zoom into that particular state. The data used to map the choropleth coloring comes from the U.S. Census Data.</li>
  <li>Marker Clusters (from Leaflet.markercluster)
  One issue with mapping in general is what to do with markers of the same latitude and longitude. Because we have presses of the same cities and the location data cannot be more specific, we have to utilize a different tool to be able to display all the markers in a particular geographical coordinate. This Leaflet plugin allows for markers to be clustered and when click upon, it displays all the markers at that point to be clicked on.</li>
  <li>Filters
  There are a variety of filters on the sidebar that replicate the filters found on the HUF website. Here you can filter by type of article, or by type of press.</li>
</ol>

<p>Here’s a numbered list:</p>

<ol>
  <li>first item</li>
  <li>second item</li>
  <li>third item</li>
</ol>

<p>Note again how the actual text starts at 4 columns in (4 characters
from the left side). Here’s a code sample:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Let me re-iterate ...
for i in 1 .. 10 { do-something(i) }
</code></pre></div></div>

<p>As you probably guessed, indented 4 spaces. By the way, instead of
indenting the block, you can use delimited blocks, if you like:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>define foobar() {
    print "Welcome to flavor country!";
}
</code></pre></div></div>

<p>(which makes copying &amp; pasting easier). You can optionally mark the
delimited block for Pandoc to syntax highlight it by specifying the languagae after the start of a block (e.g. <code class="language-plaintext highlighter-rouge">~~~cpp</code>) which would look like :</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> 
<span class="p">{</span>    
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Size of char: "</span> <span class="o">&lt;&lt;</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">" byte"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Size of int: "</span> <span class="o">&lt;&lt;</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">" bytes"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Size of float: "</span> <span class="o">&lt;&lt;</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">float</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">" bytes"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Size of double: "</span> <span class="o">&lt;&lt;</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">double</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">" bytes"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="an-h3-header">An H3 header</h3>

<p>Now a nested list:</p>

<ol>
  <li>
    <p>First, get these ingredients:</p>

    <ul>
      <li>carrots</li>
      <li>celery</li>
      <li>lentils</li>
    </ul>
  </li>
  <li>
    <p>Boil some water.</p>
  </li>
  <li>
    <p>Dump everything in the pot and follow
this algorithm:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>find wooden spoon
uncover pot
stir
cover pot
balance wooden spoon precariously on pot handle
wait 10 minutes
goto first step (or shut off burner when done)
</code></pre></div>    </div>

    <p>Do not bump wooden spoon or it will fall.</p>
  </li>
</ol>

<p>Notice again how text always lines up on 4-space indents (including
that last line which continues item 3 above).</p>

<p>Here’s a footnote <sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup>.</p>

<p>Tables can look like this:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Header 1</th>
      <th style="text-align: center">Header 2</th>
      <th style="text-align: center">Header 3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">data1a</td>
      <td style="text-align: center">Data is longer than header</td>
      <td style="text-align: center">1</td>
    </tr>
    <tr>
      <td style="text-align: center">d1b</td>
      <td style="text-align: center">add a cell</td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center">lorem</td>
      <td style="text-align: center">ipsum</td>
      <td style="text-align: center">3</td>
    </tr>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: center">empty outside cells</td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center">skip</td>
      <td style="text-align: center"> </td>
      <td style="text-align: center">5</td>
    </tr>
    <tr>
      <td style="text-align: center">six</td>
      <td style="text-align: center">Morbi purus</td>
      <td style="text-align: center">6</td>
    </tr>
  </tbody>
</table>

<p>A horizontal rule follows.</p>

<hr />

<p>Here’s a definition list:</p>

<dl>
  <dt>apples</dt>
  <dd>Good for making applesauce.</dd>
  <dt>oranges</dt>
  <dd>Citrus!</dd>
  <dt>tomatoes</dt>
  <dd>There’s no “e” in tomatoe.</dd>
</dl>

<p>Again, text is indented 4 spaces. (Put a blank line between each
term and  its definition to spread things out more.)</p>

<p>Here’s a “line block” (note how whitespace is honored):</p>

<table>
  <tbody>
    <tr>
      <td>Line one</td>
    </tr>
    <tr>
      <td>Line too</td>
    </tr>
    <tr>
      <td>Line tree</td>
    </tr>
  </tbody>
</table>

<p>and images can be specified like so:</p>

<p><img src="https://images.unsplash.com/photo-1488190211105-8b0e65b80b4e?w=300&amp;h=300&amp;fit=crop" alt="example image" title="An exemplary image" /></p>

<p>Inline math equation: $\omega = d\phi / dt$. Display
math should get its own line like so:</p>

\[I = \int \rho R^{2} dV\]
<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1" role="doc-endnote">
      <p>Some footnote text. <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>
:ET